<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title><ui:insert name="title">Google Maps</ui:insert></title>
        <script type='text/javascript' src='http://maps.google.com/maps/api/js?sensor=true'></script>
        <script src="http://www.google.com/jsapi" type="text/javascript" ></script>
        <script type="text/javascript">
			var currentMarker = null;
			
			function handlePointClick(event) {
				if(currentMarker === null) {
					document.getElementById('lat').value = event.latLng.lat();
					document.getElementById('lng').value = event.latLng.lng();

					currentMarker = new google.maps.Marker({
						position:new google.maps.LatLng(event.latLng.lat(), event.latLng.lng())
					});
	
					PF('map').addOverlay(currentMarker);

					PF('dlg').show();
				}	
			}

			function markerAddComplete() {
				var title = document.getElementById('title');
				currentMarker.setTitle(title.value);
				title.value = "";

				currentMarker = null;
				PF('dlg').hide();
			}

			function cancel() {
				PF('dlg').hide();
				currentMarker.setMap(null);
				currentMarker = null;

				return false;
			}
		</script>
        
        <style type="text/css">
            html, body {
                height: 100%;
                min-width: 480px;
                min-height: 320px;
                margin: 0;
            }
            .gmap {
                min-height: 600px;
                height: 25% !important;
                min-width: 400px;
                width: 25% !important;
            }
        </style>
    </h:head>
    <h:body>
    <h1>Bienvenido a Planes Cuenca</h1>
    
    <h2>Por favor ingrese su ubicacion y su presupuesto</h2>
        <h:form id="formapas" style="height: 100%">
        
        
        <div>
            <p:growl id="messages" showDetail="true" />
            
            <p:gmap widgetVar="map" center="-2.897374, -79.004551" zoom="15" type="HYBRID" styleClass="gmap" model="#{googleMapView.simpleModel}" >
             <p:ajax event="pointSelect" listener="#{googleMapView.onPointSelect}" onPointSelectUpdate="messages" />  
             </p:gmap>
        </div>
        
        <div>
        	<p:outputLabel>Ingrese el presupuesto</p:outputLabel>
        	<p:inputText value="#{googleMapView.presupuesto}"  required="true" validatorMessage="Ingrese el Presupuesto Por Favor"></p:inputText>
        </div>
        <div>
         
        	<p:commandButton actionListener="#{googleMapView.testButtonAction}" label="Generar Plan" value="Generar Plan" />

			<p:commandButton actionListener="#{googleMapView.ConsultaPorPrecio}" value="POR PRECIO" label="Generar Plan" />

        </div>
        </h:form>   
    </h:body>
</html>